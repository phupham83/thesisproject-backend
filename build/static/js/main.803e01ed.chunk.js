(this.webpackJsonpthesisproject=this.webpackJsonpthesisproject||[]).push([[0],{43:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n(18),a=n.n(c),s=n(5),i=(n(43),n(1)),u=function(){return Object(i.jsx)("h3",{children:"404 Not Found"})},o=function(){var t=Object(s.c)((function(t){return t.transactions}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Transactions"}),Object(i.jsx)("ul",{children:t.map((function(t){return Object(i.jsxs)("li",{children:[t.counterparty,t.amount]},t.id)}))})]})},j=n(4),l=n.n(j),p=n(6),b=n(15),d=n(13),O=n.n(d),f=function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("/api/login",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("/api/users",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.put("/api/obpApi/save/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v={login:f,signup:h,getConsent:function(){window.location.href="/api/obpApi/connect"},getAccounts:function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/api/obpApi/getMyAccounts/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),confirmConsent:x},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN":case"LOCAL_LOGIN":return e.data;case"LOGOUT":return null;case"SIGN_UP":case"GET_CONSENT":case"CONFIRM_CONSENT":return console.log(e.data),t;case"GET_ACCOUNTS":var n=Object(b.a)(Object(b.a)({},t),{},{accounts:e.data});return n;default:console.log("")}return t},m=n(2),w=function(){var t=Object(s.b)(),e=Object(m.g)();return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Log in to application"}),Object(i.jsxs)("form",{onSubmit:function(n){n.preventDefault();var r=n.target.Username.value,c=n.target.Password.value;t(function(t,e,n){return function(){var r=Object(p.a)(l.a.mark((function r(c){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v.login({username:t,password:e});case 3:a=r.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),c({type:"LOGIN",data:a}),n(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(t){return r.apply(this,arguments)}}()}(r,c,(function(){return e.push("/")})))},children:[Object(i.jsxs)("div",{children:["Username",Object(i.jsx)("input",{type:"text",name:"Username",id:"username"})]}),Object(i.jsxs)("div",{children:["Password",Object(i.jsx)("input",{type:"password",name:"Password",id:"password"})]}),Object(i.jsx)("button",{type:"submit",children:"Login"})]})]})},y=function(){var t=Object(s.b)(),e=Object(m.g)();return Object(i.jsx)("button",{onClick:function(n){n.preventDefault();t(function(t){return function(e){window.localStorage.clear(),e({type:"LOGOUT"}),t()}}((function(){return e.push("/")})))},children:"Log out"})},N=function(){var t=Object(s.b)(),e=Object(m.g)();return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Sign up for the application"}),Object(i.jsxs)("form",{onSubmit:function(n){n.preventDefault();var r=n.target.Username.value,c=n.target.Password.value,a=n.target.Name.value;t(function(t,e,n,r){return function(){var c=Object(p.a)(l.a.mark((function c(a){var s;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,v.signup({username:t,name:e,password:n});case 3:s=c.sent,a({type:"SIGN_UP",data:s}),r(),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),console.log(c.t0);case 11:case"end":return c.stop()}}),c,null,[[0,8]])})));return function(t){return c.apply(this,arguments)}}()}(r,a,c,(function(){return e.push("/")})))},children:[Object(i.jsxs)("div",{children:["Username",Object(i.jsx)("input",{type:"text",name:"Username",id:"username"})]}),Object(i.jsxs)("div",{children:["Name",Object(i.jsx)("input",{type:"text",name:"Name",id:"name"})]}),Object(i.jsxs)("div",{children:["Password",Object(i.jsx)("input",{type:"password",name:"Password",id:"password"})]}),Object(i.jsx)("button",{type:"submit",children:"Sign up"})]})]})},C=function(){var t=Object(s.b)(),e=Object(m.g)(),n=Object(s.c)((function(t){return t.user})),r=function(){return e.push("/")};return Object(i.jsx)("div",{children:n?Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Consent confirmation"}),Object(i.jsx)("p",{children:"By accepting you are allowing your data to be accessed"}),Object(i.jsx)("button",{onClick:function(e){e.preventDefault(),t(function(t,e){return function(){var n=Object(p.a)(l.a.mark((function n(r){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.confirmConsent(t);case 3:c=n.sent,r({type:"CONFIRM_CONSENT",data:c}),e(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(t){return n.apply(this,arguments)}}()}(n.id,r))},children:"Confirm"})]}):Object(i.jsx)(m.a,{to:"/"})})},T=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.user}));Object(r.useEffect)((function(){t(function(t){return t.consent?function(){var e=Object(p.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.getAccounts(t.id);case 3:r=e.sent,n({type:"GET_ACCOUNTS",data:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}():function(){var t=Object(p.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e({type:"GET_ACCOUNTS",data:null})}catch(n){console.log(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[t]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Accounts"}),e.consent[0]?Object(i.jsx)("div",{children:e.accounts}):Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:"Please add an account to start"}),Object(i.jsx)("button",{onClick:function(n){n.preventDefault(),t((e.id,function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.getConsent();case 3:n=t.sent,e({type:"GET_CONSENT",data:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))},children:"Add account"})]})]})},S={getAll:function(){var t=Object(p.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/api/transactions");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT_TRANSACTION":return e.data;default:console.log("")}return t},A=n(12),I=function(){var t=Object(s.b)();Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var n=JSON.parse(e);t(function(t){return function(e){e({type:"LOCAL_LOGIN",data:t})}}(n))}}),[t]),Object(r.useEffect)((function(){t(function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.getAll();case 2:n=t.sent,e({type:"INIT_TRANSACTION",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]);var e=Object(s.c)((function(t){return t.user})),n={padding:5};return Object(i.jsx)("div",{children:null===e?Object(i.jsx)(A.a,{children:Object(i.jsxs)(m.d,{children:[Object(i.jsxs)(m.b,{path:"/login",children:[Object(i.jsx)(A.b,{style:n,to:"/",children:"Home"}),Object(i.jsx)(w,{})]}),Object(i.jsxs)(m.b,{path:"/signup",children:[Object(i.jsx)(A.b,{style:n,to:"/",children:"Home"}),Object(i.jsx)(N,{})]}),Object(i.jsx)(m.b,{exact:!0,path:"/",children:Object(i.jsxs)("div",{children:[Object(i.jsx)(A.b,{style:n,to:"/login",children:"Login"}),Object(i.jsx)(A.b,{style:n,to:"/signup",children:"Sign Up"})]})}),Object(i.jsxs)(m.b,{path:"*",children:[Object(i.jsx)(A.b,{style:n,to:"/",children:"Home"}),Object(i.jsx)(u,{})]})]})}):Object(i.jsxs)(A.a,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(A.b,{style:n,to:"/transactions",children:"Transactions"}),Object(i.jsx)(A.b,{style:n,to:"/accounts",children:"Accounts"}),Object(i.jsx)(A.b,{style:n,to:"/",children:"Home"}),Object(i.jsxs)("p",{children:[e.username," logged in ",Object(i.jsx)(y,{})]})]}),Object(i.jsxs)(m.d,{children:[Object(i.jsx)(m.b,{path:"/transactions",children:Object(i.jsx)(o,{})}),Object(i.jsx)(m.b,{path:"/accounts",children:Object(i.jsx)(T,{})}),Object(i.jsx)(m.b,{path:"/consent",children:Object(i.jsx)(C,{})}),Object(i.jsx)(m.b,{exact:!0,path:"/",children:Object(i.jsx)("h1",{children:"Welcome to your budget planner"})}),Object(i.jsxs)(m.b,{path:"*",children:[Object(i.jsx)(A.b,{style:n,to:"/",children:"Home"}),Object(i.jsx)(u,{})]})]})]})})},L=n(17),U=n(32),E=n(33),G=Object(L.combineReducers)({transactions:k,user:g}),_=Object(L.createStore)(G,Object(E.composeWithDevTools)(Object(L.applyMiddleware)(U.a))),P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),r(t),c(t),a(t),s(t)}))};a.a.render(Object(i.jsx)(s.a,{store:_,children:Object(i.jsx)(I,{})}),document.getElementById("root")),P()}},[[68,1,2]]]);
//# sourceMappingURL=main.803e01ed.chunk.js.map